<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Setting up - NMSDK</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Setting up";
    var mkdocs_page_input_path = "exporting/exporting.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> NMSDK</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/">Setup</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Importing a Scene</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../importing/importing/">Importing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../importing/manipulating_scenes/">Manipulating imported scenes</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Exporting a Scene</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Setting up</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#important-info-before-you-start">Important info before you start</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#updating-from-old-format-scenes">Updating from old-format scenes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#setting-up">Setting up</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tips">Tips</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../node_docs/">Node type guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../entities/">Adding Entities</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../animations/">Adding Animations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../proc_gen/">Making a proc-gen scene</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../action_triggers/">Creating Action Triggers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../shader_nodes/">Shader Setup</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Examples</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../examples/create_procgen_scene/">Creating a proc-gen reference scene</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/">API guide</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../change_log/">Change log</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">NMSDK</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Exporting a Scene &raquo;</li>
        
      
    
    <li>Setting up</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="exporting-a-blender-scene-into-a-nms-compatible-format">Exporting a Blender scene into a NMS compatible format</h1>
<p>NMSDK's primary functionality is to convert scenes created in Blender into a format that NMS can load and display in the game.
This can be anything from extra rocks or plants, to custom buildings that are scattered around on planets, new parts to be added to your base, or even new ships or freighters that can be flown or part of your fleet!</p>
<p>To provide this functionality a new panel has been added to the blender user interface (UI) to allow the user to enter any relevant information required to export a model to the format compatible with NMS.</p>
<h2 id="important-info-before-you-start">Important info before you start</h2>
<p>If you are importing an <code>.obj</code> file into Blender to be exported with NMSDK, ensure that the vertex split mode is set to <code>Keep Vert Order</code> (see below). If this is not done then you will need to manually triangulate the mesh before exporting.</p>
<p><img alt="import obj" src="../../images/import_obj.png" /></p>
<h2 id="updating-from-old-format-scenes">Updating from old-format scenes</h2>
<p>Previously all objects that were to be exported had to be a child of a node called <code>NMS_SCENE</code>. This requirement has been removed in the current version of NSMDK, as well as the requirement for an object to have <code>NMS_</code> at the beginning of its name.
Old format scenes in blender can be updated to the new format by simply pressing the <code>Change NMS Node type</code> button in the NMSDK side panel:</p>
<p><img alt="update nodes" src="../../images/update_old_scenes.png" /></p>
<h2 id="setting-up">Setting up</h2>
<p>NMSDK uses a consistent node setup for both imported and exported scenes to allow the <code>import &gt; modify &gt; export</code> workflow to be as seamless as possible in the future.
Because of this, the <code>Reference</code> node type is given a special place.
Putting it simply, the <code>Reference</code> node type is used to denote a scene that is to be exported.
<code>Reference</code> nodes can either be at the top level of a scene (to indicate that you have multiple scenes to be exported that are potentially unrelated to each other), or nested within a scene (to indicate that the sub-scene may be referenced by other scenes).
To allow for flexibility, <code>Reference</code> nodes can be given two important properties, <code>Reference path</code> and <code>Scene name</code>.</p>
<p><code>Reference path</code> is used to specify the path to an external scene file (relative to the PCBANKS folder).</p>
<p><code>Scene name</code> is used to specify the name of the exported sub-scene.
This is the name of the scene that any child objects will be exported in.</p>
<p>To illustrate how the parameters work consider the following two images.</p>
<p><img alt="sub ref example 1" src="../../images/sub_ref_example1.png" /></p>
<p><img alt="sub ref example 2" src="../../images/sub_ref_example2.png" /></p>
<p>In the first image we can see that the object is a reference to a scene that already exists in the NMS game files.
In this case the scene will simply contain a <code>REFERENCE</code> node with the <code>SCENEGRAPH</code> property being the path to the specified scene.</p>
<p>In the second image we can see that the object has no reference path, but instead has a <code>Scene name</code>.
When the blender scene is exported, there will be two scenes exported. The main scene (with <code>NMS_SCENE</code> being the top-most reference object), and the <code>ref_mount</code> object which will export to a scene file named <code>CONSTRUCTMOUNT.SCENE.MBIN</code>.
The main scene will contain a <code>REFERENCE</code> node with the <code>SCENEGRAPH</code> property being the file path (again, relative to the PCBANKS folder) for this scene.</p>
<p>Once you have set at least one primary object that is to be the <code>Reference</code> node, you can specify any subsequent objects to be a <code>Mesh</code>, <code>Locator</code>, <code>Reference</code>, <code>Light</code>, <code>Joint</code> or <code>Collision</code> node.
These each have their own various uses and if you are familiar with NMS scenes it will be easy to specify what each object in a blender scene is.</p>
<h2 id="tips">Tips</h2>
<p>For a detailed guide on the different node types, see the <a href="../node_docs/">node docs</a>. There are a few tips that should be kept in mind generally:</p>
<ul>
<li>Only objects that are the children of a <code>Reference</code> node will be exported.</li>
<li>Mesh collisions should be used sparingly. They take up more computational power and may cause your model to slow down the game. If you must use mesh collisions be sure to use very low poly models (in the 100's of verts, max). It is preferrential to use primitive type collision objects when possible.</li>
<li>When exporting an object it may be exported with edges and faces messed up. This happens when the mesh is improperly triangulated. Whilst NMSDK should triangulate a mesh properly it sometimes doesn't work as well as it should.
You can see the issue in the following two images (c/o Krem):</li>
</ul>
<p><img alt="bad export blender" src="../../images/bad_export_blender.png" /></p>
<p><img alt="bad export" src="../../images/bad_export.png" /></p>
<p>As we can see, the orange region doesn't look the same in the model viewer as it does in blender before export.
To fix the issue, we can select the mesh in blender, change to <code>EDIT</code> mode, then select <code>Mesh</code> &gt; <code>Faces</code> &gt; <code>Triangulate Faces</code> (see image below)</p>
<p><img alt="triangulate" src="../../images/triangulate.png" /></p>
<p>On re-export the issue should be fixed.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../node_docs/" class="btn btn-neutral float-right" title="Node type guide">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../importing/manipulating_scenes/" class="btn btn-neutral" title="Manipulating imported scenes"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../importing/manipulating_scenes/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../node_docs/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
